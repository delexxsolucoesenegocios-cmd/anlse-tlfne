<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Análise de Telefone · IAPol®</title>
<link rel="icon" type="image/png" href="./favicon.png">
<meta name="robots" content="noindex,nofollow" />
<style>
  :root{
    --bg:#0a0f1a; --card:#0f1422; --line:#1e4d92;
    --brand:#1677ff; --brand-2:#0b5ed7;
    --text:#eaf2ff; --muted:#a9c0e6;
  }
  *{box-sizing:border-box}
  body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--text);margin:0}
  .wrap{max-width:1180px;margin:0 auto;padding:24px}

  header{display:flex;align-items:center;gap:14px;margin-bottom:16px}
  .brand{display:flex;align-items:center;gap:12px}
  .brand img{width:54px;height:54px;object-fit:contain;border-radius:50%}
  .brand h1{font-size:32px;margin:0;color:#d8e8ff;line-height:1.1}
  .brand .badge{
    margin-top:6px;display:inline-block;padding:6px 14px;border-radius:999px;
    background:#0f203f;border:1px solid var(--line);color:#dbeaff;
    font-weight:700;font-size:12px;letter-spacing:.3px
  }

  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.28);padding:20px}
  .sub{color:var(--muted);margin:6px 0 12px}
  form{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:12px}
  input[type=text]{flex:1;min-width:280px;padding:12px 14px;border-radius:12px;border:1px solid #1b3b6f;background:#0f1422;color:#f0f6ff}
  input.invalid{border-color:#e5534b;outline-color:#e5534b}
  button{padding:12px 16px;border-radius:12px;border:0;background:var(--brand);color:#fff;font-weight:700;cursor:pointer}
  button:hover{background:var(--brand-2)}
  .actions{display:flex;gap:8px;margin:8px 0 4px;flex-wrap:wrap}
  .pill{display:inline-block;padding:6px 10px;border:1px solid var(--line);border-radius:999px;background:#0f203f;color:#d7e7ff;margin:4px 6px 0 0;font-weight:600}
  .hint{font-size:12px;color:#9db3dc;margin-top:6px}

  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px;margin-top:8px}
  .group{border:1px solid var(--line);border-radius:12px;padding:12px;background:#0f1422}
  .group h2{font-size:15px;margin:0 0 8px;color:#a9d1ff}
  ul{list-style:none;margin:0;padding:0}
  li{padding:8px 0;border-bottom:1px solid rgba(255,255,255,.06)}
  li:last-child{border-bottom:0}
  a{color:#9dc9ff;text-decoration:none}
  a:hover{text-decoration:underline}

  .footer{margin-top:12px;text-align:center;color:#97acd6;font-size:12px}
</style>

<!-- jsPDF e SheetJS -->
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
<div class="wrap">
  <header>
    <div class="brand">
      <img src="./iapol-logo.png" alt="IAPol®" onerror="this.style.display='none'">
      <div>
        <h1>Análise de Telefone</h1>
        <div class="badge">IAPol® | Inteligência Artificial Policial</div>
      </div>
    </div>
  </header>

  <div class="card">
    <p class="sub">Insira o <strong>CPF</strong> da pessoa (ou cole um CPF encontrado na investigação). O painel gera <strong>consultas diretas</strong>, <strong>dorks do Google</strong> e <strong>atalhos de recuperação de cadastro</strong> que, conforme o caso, expõem parte do telefone vinculado (ex.: <code>(67) 9**-3255**</code>).</p>

    <form onsubmit="return gerar()">
      <input type="text" id="cpf" inputmode="numeric" autocomplete="off"
             placeholder="CPF (ex.: 123.456.789-09)" oninput="maskCPF(this)" />
      <button type="submit">Analisar</button>
    </form>

    <div id="fmtBox" class="hint" style="display:none"></div>

    <div class="actions" id="exportBar" style="display:none">
      <button type="button" onclick="exportCSV()">Exportar CSV</button>
      <button type="button" onclick="exportPDF()">Exportar PDF</button>
      <button type="button" onclick="exportTXT()">Exportar TXT</button>
      <button type="button" onclick="exportXLSX()">Exportar XLSX</button>
    </div>

    <div class="grid" id="results"></div>
  </div>

  <div class="footer">IAPol® · uso responsável (LGPD/leis vigentes). Respeite ToS/termos de cada plataforma.</div>
</div>

<script>
/* ================= CPF: máscara/validação ================= */
function onlyDigits(s){ return (s||"").replace(/\D+/g,""); }
function maskCPF(inp){
  const d = onlyDigits(inp.value).slice(0,11);
  let f = d;
  if(d.length>3 && d.length<=6) f = d.slice(0,3)+"."+d.slice(3);
  else if(d.length>6 && d.length<=9) f = d.slice(0,3)+"."+d.slice(3,6)+"."+d.slice(6);
  else if(d.length>9) f = d.slice(0,3)+"."+d.slice(3,6)+"."+d.slice(6,9)+"-"+d.slice(9,11);
  inp.value = f;
}
function validaCPF(cpf){
  const s = onlyDigits(cpf);
  if(s.length!==11 || /^(\d)\1{10}$/.test(s)) return false;
  const calc = (base) => {
    let sum=0, fac=base+1;
    for(let i=0;i<base;i++) sum += parseInt(s[i],10)*(fac-i);
    const r = (sum*10)%11;
    return (r===10?0:r);
  };
  if(calc(9)!==parseInt(s[9],10)) return false;
  if(calc(10)!==parseInt(s[10],10)) return false;
  return true;
}
function ensureCPF(){
  const input = document.getElementById("cpf");
  const ok = validaCPF(input.value);
  input.classList.toggle("invalid", !ok);
  return ok ? { raw: onlyDigits(input.value), fmt: input.value } : null;
}

/* ======= Catálogo de plataformas p/ “esqueci minha senha” ======= */
/* (abrirá a tela de recuperação; o investigador informa o CPF no formulário da própria plataforma) */
const RESET_PLATFORMS = [
  ["OLX", "https://www.olx.com.br/ajuda/conta/recuperar-senha"],
  ["99 (app)", "https://passageiro.99app.com/forgot-password"],
  ["Shopee", "https://shopee.com.br/buyer/login/forgot-password"],
  ["iFood", "https://www.ifood.com.br/account/forgot-password"],
  ["Mercado Livre", "https://www.mercadolivre.com.br/registration/password-recovery"],
  ["Magazine Luiza", "https://www.magazineluiza.com.br/cliente/recuperar-senha/"],
  ["Americanas", "https://www.americanas.com.br/senha/recuperar"],
  ["Submarino", "https://www.submarino.com.br/senha/recuperar"]
];

/* ================= GRUPOS (com base no texto de referência) ================= */
const GRUPOS = [
  ["Consultas diretas", [
    ["Mind-7 (dados públicos)", "https://mind-7.org/"],
    ["CNPJ.biz — se o CPF for MEI", "https://cnpj.biz/"],
    ["Epieos — se tiver e-mail (OSINT e-mail)", "https://epieos.com/"]
  ]],
  ["Google Dorks (por CPF)", [
    // Dorks do texto (e variações úteis)
    ["PDF com telefone", "https://www.google.com/search?q=%22%CPF_FMT%%22+telefone+filetype:pdf"],
    ["site:cnpj.biz (MEI)", "https://www.google.com/search?q=%22%CPF_FMT%%22+site:cnpj.biz"],
    ["Planilhas XLS", "https://www.google.com/search?q=%22%CPF_FMT%%22+filetype:xls"],
    ["XLS com telefone (exclui gov.br/brasil)", "https://www.google.com/search?q=filetype:xls+%22%CPF_FMT%%22+telefone+-gov+-brasil"],
    // variações adicionais
    ["CSV/XLSX/PDF (amplo)", "https://www.google.com/search?q=%22%CPF_FMT%%22+(filetype:csv+OR+filetype:xlsx+OR+filetype:pdf)"],
    ["Diários/Transparência", "https://www.google.com/search?q=site:in.gov.br+OR+site:transparencia.*+%22%CPF_FMT%%22+telefone"],
    ["Portais *.jus.br", "https://www.google.com/search?q=site:*.jus.br+%22%CPF_FMT%%22+telefone"],
    ["Sindicato/Associação", "https://www.google.com/search?q=%22%CPF_FMT%%22+(sindicato+OR+associados+OR+editais)+telefone"]
  ]],
  ["Recuperação de cadastro (pode exibir partes do telefone)", []], // será preenchido via RESET_PLATFORMS
  ["Outros motores", [
    ["Bing (amplo)", "https://www.bing.com/search?q=%22%CPF_FMT%%22+telefone"],
    ["DuckDuckGo (amplo)", "https://duckduckgo.com/?q=%22%CPF_FMT%%22+telefone"]
  ]]
];

/* Insere dinamicamente as plataformas de reset */
RESET_PLATFORMS.forEach(([nome,url])=>{
  GRUPOS[2][1].push([`${nome} — “esqueci minha senha”`, url]);
});

/* ================= Renderização ================= */
function buildUrl(tpl, cpfFmt, cpfRaw){
  return tpl.replaceAll("%CPF_FMT%", encodeURIComponent(cpfFmt))
            .replaceAll("%CPF_RAW%", encodeURIComponent(cpfRaw));
}
function montar(cpfFmt, cpfRaw){
  const fmtBox = document.getElementById("fmtBox");
  const box = document.getElementById("results");
  const bar = document.getElementById("exportBar");
  box.innerHTML = "";

  fmtBox.innerHTML = `<span class="pill">CPF: ${cpfFmt}</span><span class="pill">RAW: ${cpfRaw}</span>`;
  fmtBox.style.display = "block";

  GRUPOS.forEach(([titulo,itens])=>{
    const div = document.createElement("div");
    div.className = "group";
    const h2  = document.createElement("h2"); h2.textContent = titulo;
    const ul  = document.createElement("ul");

    itens.forEach(([label,tpl])=>{
      const li = document.createElement("li");
      const a  = document.createElement("a");
      a.textContent = label; a.target = "_blank"; a.rel = "noopener";
      a.href = buildUrl(tpl, cpfFmt, cpfRaw);
      li.appendChild(a); ul.appendChild(li);
    });

    div.appendChild(h2); div.appendChild(ul); box.appendChild(div);
  });

  bar.style.display = "flex";
}

/* ================= Exportações ================= */
function buildRows(cpfFmt, cpfRaw){
  const rows=[];
  GRUPOS.forEach(([grupo,itens])=>{
    itens.forEach(([fonte,tpl])=>{
      rows.push({CPF: cpfFmt, RAW: cpfRaw, GRUPO: grupo, FONTE: fonte, URL: buildUrl(tpl,cpfFmt,cpfRaw)});
    });
  });
  return rows;
}
function exportCSV(){
  const st = window.__cpf_state; if(!st){ alert("Faça a análise primeiro."); return; }
  const rows = buildRows(st.cpfFmt, st.cpfRaw);
  let csv = "CPF;RAW;GRUPO;FONTE;URL\n";
  rows.forEach(r=>{ csv += `"${r.CPF}";"${r.RAW}";"${r.GRUPO.replace(/"/g,'""')}";"${r.FONTE.replace(/"/g,'""')}";"${r.URL.replace(/"/g,'""')}"\n`; });
  const blob = new Blob([csv], {type:"text/csv;charset=utf-8"});
  const a=document.createElement("a"); a.href=URL.createObjectURL(blob);
  a.download=`IAPol_DescTelefone_por_CPF_${st.cpfRaw}.csv`; a.click();
}
function exportTXT(){
  const st = window.__cpf_state; if(!st){ alert("Faça a análise primeiro."); return; }
  const rows = buildRows(st.cpfFmt, st.cpfRaw);
  let txt = `IAPol® — Descoberta de Telefone por CPF\nCPF: ${st.cpfFmt} (raw: ${st.cpfRaw})\nData: ${new Date().toLocaleString("pt-BR")}\n\n`;
  rows.forEach(r=>{ txt += `- [${r.GRUPO}] ${r.FONTE}: ${r.URL}\n`; });
  const blob = new Blob([txt], {type:"text/plain;charset=utf-8"});
  const a=document.createElement("a"); a.href=URL.createObjectURL(blob);
  a.download=`IAPol_DescTelefone_por_CPF_${st.cpfRaw}.txt`; a.click();
}
function exportPDF(){
  const st = window.__cpf_state; if(!st){ alert("Faça a análise primeiro."); return; }
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit:"pt", format:"a4" });
  const m=48; let y=m;
  doc.setFont("helvetica","bold"); doc.setFontSize(16);
  doc.text("IAPol® — Descoberta de Telefone por CPF", m, y); y+=18;
  doc.setFont("helvetica","normal"); doc.setFontSize(12);
  doc.text(`CPF: ${st.cpfFmt} (raw: ${st.cpfRaw})`, m, y); y+=8;
  doc.text(`Data: ${new Date().toLocaleString("pt-BR")}`, m, y); y+=18;

  const rows = buildRows(st.cpfFmt, st.cpfRaw);
  doc.setFontSize(11);
  let gAtual = "";
  rows.forEach(r=>{
    if(r.GRUPO!==gAtual){
      if(y>780){ doc.addPage(); y=m; }
      gAtual=r.GRUPO; doc.setFont("helvetica","bold"); doc.text(gAtual, m, y); y+=12;
      doc.setFont("helvetica","normal");
    }
    const ln = `• ${r.FONTE}: ${r.URL}`;
    const parts = doc.splitTextToSize(ln, 515);
    parts.forEach(L=>{ if(y>800){ doc.addPage(); y=m; } doc.text(L, m, y); y+=14; });
  });

  if(y>800){ doc.addPage(); y=m; }
  doc.setDrawColor(160); doc.line(m,820,595-m,820);
  doc.setFontSize(9); doc.setTextColor(120);
  doc.text("Observação: plataformas de recuperação podem exibir parte do telefone vinculado ao CPF. Respeite LGPD/ToS.", m, 838);
  doc.save(`IAPol_DescTelefone_por_CPF_${st.cpfRaw}.pdf`);
}
function exportXLSX(){
  const st = window.__cpf_state; if(!st){ alert("Faça a análise primeiro."); return; }
  const rows = buildRows(st.cpfFmt, st.cpfRaw);
  const ws = XLSX.utils.json_to_sheet(rows);
  const wb = XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(wb, ws, "Telefone_por_CPF");
  XLSX.writeFile(wb, `IAPol_DescTelefone_por_CPF_${st.cpfRaw}.xlsx`);
}

/* ================= Fluxo ================= */
function gerar(){
  const st = ensureCPF();
  if(!st){ alert("CPF inválido."); return false; }
  window.__cpf_state = { cpfRaw: st.raw, cpfFmt: st.fmt };
  history.replaceState({}, "", location.pathname + "?cpf=" + encodeURIComponent(st.fmt));
  montar(st.fmt, st.raw);
  return false;
}
(function init(){
  const p = new URLSearchParams(location.search);
  const q = p.get("cpf");
  if(q){
    document.getElementById("cpf").value = q;
    const st = ensureCPF();
    if(st){ window.__cpf_state = { cpfRaw: st.raw, cpfFmt: st.fmt }; montar(st.fmt, st.raw); }
  }
})();
</script>
</body>
</html>
